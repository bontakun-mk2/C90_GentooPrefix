<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4-dev">
<title>でき ぬ?　　　　　　　Gentoo Prefix</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary {
    display: block;
}

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video {
    display: inline-block;
}

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) {
    display: none;
    height: 0;
}

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template {
    display: none;
}

script {
    display: none !important;
}

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html {
    font-family: sans-serif; /* 1 */
    -ms-text-size-adjust: 100%; /* 2 */
    -webkit-text-size-adjust: 100%; /* 2 */
}

/** Remove default margin. */
body {
    margin: 0;
}

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a {
    background: transparent;
}

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus {
    outline: thin dotted;
}

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover {
    outline: 0;
}

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] {
    border-bottom: 1px dotted;
}

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong {
    font-weight: bold;
}

/** Address styling not present in Safari 5 and Chrome. */
dfn {
    font-style: italic;
}

/** Address differences between Firefox and other browsers. */
hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/** Address styling not present in IE 8/9. */
mark {
    background: #ff0;
    color: #000;
}

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp {
    font-family: monospace, serif;
    font-size: 1em;
}

/** Improve readability of pre-formatted text in all browsers. */
pre {
    white-space: pre-wrap;
}

/** Set consistent quote types. */
q {
    quotes: "\201C" "\201D" "\2018" "\2019";
}

/** Address inconsistent and variable font size in all browsers. */
small {
    font-size: 80%;
}

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img {
    border: 0;
}

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) {
    overflow: hidden;
}

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure {
    margin: 0;
}

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend {
    border: 0; /* 1 */
    padding: 0; /* 2 */
}

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea {
    font-family: inherit; /* 1 */
    font-size: 100%; /* 2 */
    margin: 0; /* 3 */
}

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input {
    line-height: normal;
}

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select {
    text-transform: none;
}

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
}

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] {
    cursor: default;
}

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
}

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table {
    border-collapse: collapse;
    border-spacing: 0;
}

meta.foundation-mq-small {
    font-family: "only screen and (min-width: 768px)";
    width: 768px;
}

meta.foundation-mq-medium {
    font-family: "only screen and (min-width:1280px)";
    width: 1280px;
}

meta.foundation-mq-large {
    font-family: "only screen and (min-width:1440px)";
    width: 1440px;
}

*, *:before, *:after {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
}

html, body {
    font-size: 100%;
}

body {
    background: white;
    color: rgba(0, 0, 0, 0.8);
    padding: 0;
    margin: 0;
    font-family: "Noto Serif", "DejaVu Serif", serif;
    font-weight: normal;
    font-style: normal;
    line-height: 1;
    position: relative;
    cursor: auto;
}

a:hover {
    cursor: pointer;
}

img, object, embed {
    max-width: 100%;
    height: auto;
}

object, embed {
    height: 100%;
}

img {
    -ms-interpolation-mode: bicubic;
}

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object {
    max-width: none !important;
}

.left {
    float: left !important;
}

.right {
    float: right !important;
}

.text-left {
    text-align: left !important;
}

.text-right {
    text-align: right !important;
}

.text-center {
    text-align: center !important;
}

.text-justify {
    text-align: justify !important;
}

.hide {
    display: none;
}

.antialiased, body {
    -webkit-font-smoothing: antialiased;
}

img {
    display: inline-block;
    vertical-align: middle;
}

textarea {
    height: auto;
    min-height: 50px;
}

select {
    width: 100%;
}

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p {
    font-size: 1.21875em;
    line-height: 1.6;
}

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title {
    line-height: 1.45;
    color: #7a2518;
    font-weight: normal;
    margin-top: 0;
    margin-bottom: 0.25em;
}

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td {
    margin: 0;
    padding: 0;
    direction: ltr;
}

/* Default Link Styles */
a {
    color: #2156a5;
    text-decoration: underline;
    line-height: inherit;
}

a:hover, a:focus {
    color: #1d4b8f;
}

a img {
    border: none;
}

/* Default paragraph styles */
p {
    font-family: inherit;
    font-weight: normal;
    font-size: 1em;
    line-height: 1.6;
    margin-bottom: 1.25em;
    text-rendering: optimizeLegibility;
}

p aside {
    font-size: 0.875em;
    line-height: 1.35;
    font-style: italic;
}

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
    font-family: "Open Sans", "DejaVu Sans", sans-serif;
    font-weight: 300;
    font-style: normal;
    color: #ba3925;
    text-rendering: optimizeLegibility;
    margin-top: 1em;
    margin-bottom: 0.5em;
    line-height: 1.0125em;
}

h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small {
    font-size: 60%;
    color: #e99b8f;
    line-height: 0;
}

h1 {
    font-size: 2.125em;
}

h2 {
    font-size: 1.6875em;
}

h3, #toctitle, .sidebarblock > .content > .title {
    font-size: 1.375em;
}

h4 {
    font-size: 1.125em;
}

h5 {
    font-size: 1.125em;
}

h6 {
    font-size: 1em;
}

hr {
    border: solid #ddddd8;
    border-width: 1px 0 0;
    clear: both;
    margin: 1.25em 0 1.1875em;
    height: 0;
}

/* Helpful Typography Defaults */
em, i {
    font-style: italic;
    line-height: inherit;
}

strong, b {
    font-weight: bold;
    line-height: inherit;
}

small {
    font-size: 60%;
    line-height: inherit;
}

code {
    font-family: "Droid Sans Mono", "DejaVu Sans Mono", "Monospace", monospace;
    font-weight: normal;
    color: rgba(0, 0, 0, 0.9);
}

/* Lists */
ul, ol, dl {
    font-size: 1em;
    line-height: 1.6;
    margin-bottom: 1.25em;
    list-style-position: outside;
    font-family: inherit;
}

ul, ol {
    margin-left: 1.5em;
}

ul.no-bullet, ol.no-bullet {
    margin-left: 1.5em;
}

/* Unordered Lists */
ul li ul, ul li ol {
    margin-left: 1.25em;
    margin-bottom: 0;
    font-size: 1em; /* Override nested font-size change */
}

ul.square li ul, ul.circle li ul, ul.disc li ul {
    list-style: inherit;
}

ul.square {
    list-style-type: square;
}

ul.circle {
    list-style-type: circle;
}

ul.disc {
    list-style-type: disc;
}

ul.no-bullet {
    list-style: none;
}

/* Ordered Lists */
ol li ul, ol li ol {
    margin-left: 1.25em;
    margin-bottom: 0;
}

/* Definition Lists */
dl dt {
    margin-bottom: 0.3125em;
    font-weight: bold;
}

dl dd {
    margin-bottom: 1.25em;
}

/* Abbreviations */
abbr, acronym {
    text-transform: uppercase;
    font-size: 90%;
    color: rgba(0, 0, 0, 0.8);
    border-bottom: 1px dotted #dddddd;
    cursor: help;
}

abbr {
    text-transform: none;
}

/* Blockquotes */
blockquote {
    margin: 0 0 1.25em;
    padding: 0.5625em 1.25em 0 1.1875em;
    border-left: 1px solid #dddddd;
}

blockquote cite {
    display: block;
    font-size: 0.9375em;
    color: rgba(0, 0, 0, 0.6);
}

blockquote cite:before {
    content: "\2014 \0020";
}

blockquote cite a, blockquote cite a:visited {
    color: rgba(0, 0, 0, 0.6);
}

blockquote, blockquote p {
    line-height: 1.6;
    color: rgba(0, 0, 0, 0.85);
}

/* Microformats */
.vcard {
    display: inline-block;
    margin: 0 0 1.25em 0;
    border: 1px solid #dddddd;
    padding: 0.625em 0.75em;
}

.vcard li {
    margin: 0;
    display: block;
}

.vcard .fn {
    font-weight: bold;
    font-size: 0.9375em;
}

.vevent .summary {
    font-weight: bold;
}

.vevent abbr {
    cursor: auto;
    text-decoration: none;
    font-weight: bold;
    border: none;
    padding: 0 0.0625em;
}

@media only screen and (min-width: 768px) {
    h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
        line-height: 1.2;
    }

    h1 {
        font-size: 2.75em;
    }

    h2 {
        font-size: 2.3125em;
    }

    h3, #toctitle, .sidebarblock > .content > .title {
        font-size: 1.6875em;
    }

    h4 {
        font-size: 1.4375em;
    }
}

/* Tables */
table {
    background: white;
    margin-bottom: 1.25em;
    border: solid 1px #dedede;
}

table thead, table tfoot {
    background: #f7f8f7;
    font-weight: bold;
}

table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td {
    padding: 0.5em 0.625em 0.625em;
    font-size: inherit;
    color: rgba(0, 0, 0, 0.8);
    text-align: left;
}

table tr th, table tr td {
    padding: 0.5625em 0.625em;
    font-size: inherit;
    color: rgba(0, 0, 0, 0.8);
}

table tr.even, table tr.alt, table tr:nth-of-type(even) {
    background: #f8f8f7;
}

table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td {
    display: table-cell;
    line-height: 1.6;
}

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
    line-height: 1.2;
    word-spacing: -0.05em;
}

h1 strong, h2 strong, h3 strong, #toctitle strong, .sidebarblock > .content > .title strong, h4 strong, h5 strong, h6 strong {
    font-weight: 400;
}

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after {
    content: " ";
    display: table;
}

.clearfix:after, .float-group:after {
    clear: both;
}

*:not(pre) > code {
    font-size: 0.9375em;
    font-style: normal !important;
    letter-spacing: 0;
    padding: 0.1em 0.5ex;
    word-spacing: -0.15em;
    background-color: #f7f7f8;
    -webkit-border-radius: 4px;
    border-radius: 4px;
    line-height: 1.45;
    text-rendering: optimizeSpeed;
}

pre, pre > code {
    line-height: 1.45;
    color: rgba(0, 0, 0, 0.9);
    font-family: "Droid Sans Mono", "DejaVu Sans Mono", "Monospace", monospace;
    font-weight: normal;
    text-rendering: optimizeSpeed;
}

.keyseq {
    color: rgba(51, 51, 51, 0.8);
}

kbd {
    display: inline-block;
    color: rgba(0, 0, 0, 0.8);
    font-size: 0.75em;
    line-height: 1.4;
    background-color: #f7f7f7;
    border: 1px solid #ccc;
    -webkit-border-radius: 3px;
    border-radius: 3px;
    -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset;
    box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset;
    margin: -0.15em 0.15em 0 0.15em;
    padding: 0.2em 0.6em 0.2em 0.5em;
    vertical-align: middle;
    white-space: nowrap;
}

.keyseq kbd:first-child {
    margin-left: 0;
}

.keyseq kbd:last-child {
    margin-right: 0;
}

.menuseq, .menu {
    color: rgba(0, 0, 0, 0.8);
}

b.button:before, b.button:after {
    position: relative;
    top: -1px;
    font-weight: normal;
}

b.button:before {
    content: "[";
    padding: 0 3px 0 2px;
}

b.button:after {
    content: "]";
    padding: 0 2px 0 3px;
}

p a > code:hover {
    color: rgba(0, 0, 0, 0.9);
}

#header, #content, #footnotes, #footer {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    margin-top: 0;
    margin-bottom: 0;
    max-width: 62.5em;
    *zoom: 1;
    position: relative;
    padding-left: 0.9375em;
    padding-right: 0.9375em;
}

#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after {
    content: " ";
    display: table;
}

#header:after, #content:after, #footnotes:after, #footer:after {
    clear: both;
}

#content {
    margin-top: 1.25em;
}

#content:before {
    content: none;
}

#header > h1:first-child {
    color: rgba(0, 0, 0, 0.85);
    margin-top: 2.25rem;
    margin-bottom: 0;
}

#header > h1:first-child + #toc {
    margin-top: 8px;
    border-top: 1px solid #ddddd8;
}

#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) {
    border-bottom: 1px solid #ddddd8;
    padding-bottom: 8px;
}

#header .details {
    border-bottom: 1px solid #ddddd8;
    line-height: 1.45;
    padding-top: 0.25em;
    padding-bottom: 0.25em;
    padding-left: 0.25em;
    color: rgba(0, 0, 0, 0.6);
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;
    -ms-flex-flow: row wrap;
    -webkit-flex-flow: row wrap;
    flex-flow: row wrap;
}

#header .details span:first-child {
    margin-left: -0.125em;
}

#header .details span.email a {
    color: rgba(0, 0, 0, 0.85);
}

#header .details br {
    display: none;
}

#header .details br + span:before {
    content: "\00a0\2013\00a0";
}

#header .details br + span.author:before {
    content: "\00a0\22c5\00a0";
    color: rgba(0, 0, 0, 0.85);
}

#header .details br + span#revremark:before {
    content: "\00a0|\00a0";
}

#header #revnumber {
    text-transform: capitalize;
}

#header #revnumber:after {
    content: "\00a0";
}

#content > h1:first-child:not([class]) {
    color: rgba(0, 0, 0, 0.85);
    border-bottom: 1px solid #ddddd8;
    padding-bottom: 8px;
    margin-top: 0;
    padding-top: 1rem;
    margin-bottom: 1.25rem;
}

#toc {
    border-bottom: 1px solid #efefed;
    padding-bottom: 0.5em;
}

#toc > ul {
    margin-left: 0.125em;
}

#toc ul.sectlevel0 > li > a {
    font-style: italic;
}

#toc ul.sectlevel0 ul.sectlevel1 {
    margin: 0.5em 0;
}

#toc ul {
    font-family: "Open Sans", "DejaVu Sans", sans-serif;
    list-style-type: none;
}

#toc a {
    text-decoration: none;
}

#toc a:active {
    text-decoration: underline;
}

#toctitle {
    color: #7a2518;
    font-size: 1.2em;
}

@media only screen and (min-width: 768px) {
    #toctitle {
        font-size: 1.375em;
    }

    body.toc2 {
        padding-left: 15em;
        padding-right: 0;
    }

    #toc.toc2 {
        margin-top: 0 !important;
        background-color: #f8f8f7;
        position: fixed;
        width: 15em;
        left: 0;
        top: 0;
        border-right: 1px solid #efefed;
        border-top-width: 0 !important;
        border-bottom-width: 0 !important;
        z-index: 1000;
        padding: 1.25em 1em;
        height: 100%;
        overflow: auto;
    }

    #toc.toc2 #toctitle {
        margin-top: 0;
        font-size: 1.2em;
    }

    #toc.toc2 > ul {
        font-size: 0.9em;
        margin-bottom: 0;
    }

    #toc.toc2 ul ul {
        margin-left: 0;
        padding-left: 1em;
    }

    #toc.toc2 ul.sectlevel0 ul.sectlevel1 {
        padding-left: 0;
        margin-top: 0.5em;
        margin-bottom: 0.5em;
    }

    body.toc2.toc-right {
        padding-left: 0;
        padding-right: 15em;
    }

    body.toc2.toc-right #toc.toc2 {
        border-right-width: 0;
        border-left: 1px solid #efefed;
        left: auto;
        right: 0;
    }
}

@media only screen and (min-width: 1280px) {
    body.toc2 {
        padding-left: 20em;
        padding-right: 0;
    }

    #toc.toc2 {
        width: 20em;
    }

    #toc.toc2 #toctitle {
        font-size: 1.375em;
    }

    #toc.toc2 > ul {
        font-size: 0.95em;
    }

    #toc.toc2 ul ul {
        padding-left: 1.25em;
    }

    body.toc2.toc-right {
        padding-left: 0;
        padding-right: 20em;
    }
}

#content #toc {
    border-style: solid;
    border-width: 1px;
    border-color: #e0e0dc;
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: #f8f8f7;
    -webkit-border-radius: 4px;
    border-radius: 4px;
}

#content #toc > :first-child {
    margin-top: 0;
}

#content #toc > :last-child {
    margin-bottom: 0;
}

#footer {
    max-width: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    padding: 1.25em;
}

#footer-text {
    color: rgba(255, 255, 255, 0.8);
    line-height: 1.44;
}

.sect1 {
    padding-bottom: 0.625em;
}

@media only screen and (min-width: 768px) {
    .sect1 {
        padding-bottom: 1.25em;
    }
}

.sect1 + .sect1 {
    border-top: 1px solid #efefed;
}

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor {
    position: absolute;
    z-index: 1001;
    width: 1.5ex;
    margin-left: -1.5ex;
    display: block;
    text-decoration: none !important;
    visibility: hidden;
    text-align: center;
    font-weight: normal;
}

#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before {
    content: "\00A7";
    font-size: 0.85em;
    display: block;
    padding-top: 0.1em;
}

#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover {
    visibility: visible;
}

#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link {
    color: #ba3925;
    text-decoration: none;
}

#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover {
    color: #a53221;
}

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock {
    margin-bottom: 1.25em;
}

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title {
    text-rendering: optimizeLegibility;
    text-align: left;
    font-family: "Noto Serif", "DejaVu Serif", serif;
    font-size: 1rem;
    font-style: italic;
}

table.tableblock > caption.title {
    white-space: nowrap;
    overflow: visible;
    max-width: 0;
}

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p {
    color: rgba(0, 0, 0, 0.85);
}

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p {
    font-size: inherit;
}

.admonitionblock > table {
    border-collapse: separate;
    border: 0;
    background: none;
    width: 100%;
}

.admonitionblock > table td.icon {
    text-align: center;
    width: 80px;
}

.admonitionblock > table td.icon img {
    max-width: none;
}

.admonitionblock > table td.icon .title {
    font-weight: bold;
    font-family: "Open Sans", "DejaVu Sans", sans-serif;
    text-transform: uppercase;
}

.admonitionblock > table td.content {
    padding-left: 1.125em;
    padding-right: 1.25em;
    border-left: 1px solid #ddddd8;
    color: rgba(0, 0, 0, 0.6);
}

.admonitionblock > table td.content > :last-child > :last-child {
    margin-bottom: 0;
}

.exampleblock > .content {
    border-style: solid;
    border-width: 1px;
    border-color: #e6e6e6;
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: white;
    -webkit-border-radius: 4px;
    border-radius: 4px;
}

.exampleblock > .content > :first-child {
    margin-top: 0;
}

.exampleblock > .content > :last-child {
    margin-bottom: 0;
}

.sidebarblock {
    border-style: solid;
    border-width: 1px;
    border-color: #e0e0dc;
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: #f8f8f7;
    -webkit-border-radius: 4px;
    border-radius: 4px;
}

.sidebarblock > :first-child {
    margin-top: 0;
}

.sidebarblock > :last-child {
    margin-bottom: 0;
}

.sidebarblock > .content > .title {
    color: #7a2518;
    margin-top: 0;
    text-align: center;
}

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child {
    margin-bottom: 0;
}

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint {
    background: #f7f7f8;
}

.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint {
    background: #f2f1f1;
}

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] {
    -webkit-border-radius: 4px;
    border-radius: 4px;
    word-wrap: break-word;
    padding: 1em;
    font-size: 0.8125em;
}

.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap {
    overflow-x: auto;
    white-space: pre;
    word-wrap: normal;
}

@media only screen and (min-width: 768px) {
    .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] {
        font-size: 0.90625em;
    }
}

@media only screen and (min-width: 1280px) {
    .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] {
        font-size: 1em;
    }
}

.literalblock.output pre {
    color: #f7f7f8;
    background-color: rgba(0, 0, 0, 0.9);
}

.listingblock pre.highlightjs {
    padding: 0;
}

.listingblock pre.highlightjs > code {
    padding: 1em;
    -webkit-border-radius: 4px;
    border-radius: 4px;
}

.listingblock pre.prettyprint {
    border-width: 0;
}

.listingblock > .content {
    position: relative;
}

.listingblock code[data-lang]:before {
    display: none;
    content: attr(data-lang);
    position: absolute;
    font-size: 0.75em;
    top: 0.425rem;
    right: 0.5rem;
    line-height: 1;
    text-transform: uppercase;
    color: #999;
}

.listingblock:hover code[data-lang]:before {
    display: block;
}

.listingblock.terminal pre .command:before {
    content: attr(data-prompt);
    padding-right: 0.5em;
    color: #999;
}

.listingblock.terminal pre .command:not([data-prompt]):before {
    content: "$";
}

table.pyhltable {
    border-collapse: separate;
    border: 0;
    margin-bottom: 0;
    background: none;
}

table.pyhltable td {
    vertical-align: top;
    padding-top: 0;
    padding-bottom: 0;
}

table.pyhltable td.code {
    padding-left: .75em;
    padding-right: 0;
}

pre.pygments .lineno, table.pyhltable td:not(.code) {
    color: #999;
    padding-left: 0;
    padding-right: .5em;
    border-right: 1px solid #ddddd8;
}

pre.pygments .lineno {
    display: inline-block;
    margin-right: .25em;
}

table.pyhltable .linenodiv {
    background: none !important;
    padding-right: 0 !important;
}

.quoteblock {
    margin: 0 1em 1.25em 1.5em;
    display: table;
}

.quoteblock > .title {
    margin-left: -1.5em;
    margin-bottom: 0.75em;
}

.quoteblock blockquote, .quoteblock blockquote p {
    color: rgba(0, 0, 0, 0.85);
    font-size: 1.15rem;
    line-height: 1.75;
    word-spacing: 0.1em;
    letter-spacing: 0;
    font-style: italic;
    text-align: justify;
}

.quoteblock blockquote {
    margin: 0;
    padding: 0;
    border: 0;
}

.quoteblock blockquote:before {
    content: "\201c";
    float: left;
    font-size: 2.75em;
    font-weight: bold;
    line-height: 0.6em;
    margin-left: -0.6em;
    color: #7a2518;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.quoteblock blockquote > .paragraph:last-child p {
    margin-bottom: 0;
}

.quoteblock .attribution {
    margin-top: 0.5em;
    margin-right: 0.5ex;
    text-align: right;
}

.quoteblock .quoteblock {
    margin-left: 0;
    margin-right: 0;
    padding: 0.5em 0;
    border-left: 3px solid rgba(0, 0, 0, 0.6);
}

.quoteblock .quoteblock blockquote {
    padding: 0 0 0 0.75em;
}

.quoteblock .quoteblock blockquote:before {
    display: none;
}

.verseblock {
    margin: 0 1em 1.25em 1em;
}

.verseblock pre {
    font-family: "Open Sans", "DejaVu Sans", sans;
    font-size: 1.15rem;
    color: rgba(0, 0, 0, 0.85);
    font-weight: 300;
    text-rendering: optimizeLegibility;
}

.verseblock pre strong {
    font-weight: 400;
}

.verseblock .attribution {
    margin-top: 1.25rem;
    margin-left: 0.5ex;
}

.quoteblock .attribution, .verseblock .attribution {
    font-size: 0.9375em;
    line-height: 1.45;
    font-style: italic;
}

.quoteblock .attribution br, .verseblock .attribution br {
    display: none;
}

.quoteblock .attribution cite, .verseblock .attribution cite {
    display: block;
    letter-spacing: -0.05em;
    color: rgba(0, 0, 0, 0.6);
}

.quoteblock.abstract {
    margin: 0 0 1.25em 0;
    display: block;
}

.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p {
    text-align: left;
    word-spacing: 0;
}

.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before {
    display: none;
}

table.tableblock {
    max-width: 100%;
    border-collapse: separate;
}

table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child {
    margin-bottom: 0;
}

table.spread {
    width: 100%;
}

table.tableblock, th.tableblock, td.tableblock {
    border: 0 solid #dedede;
}

table.grid-all th.tableblock, table.grid-all td.tableblock {
    border-width: 0 1px 1px 0;
}

table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock {
    border-width: 1px 1px 0 0;
}

table.grid-cols th.tableblock, table.grid-cols td.tableblock {
    border-width: 0 1px 0 0;
}

table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child {
    border-right-width: 0;
}

table.grid-rows th.tableblock, table.grid-rows td.tableblock {
    border-width: 0 0 1px 0;
}

table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock {
    border-bottom-width: 0;
}

table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock {
    border-width: 1px 0 0 0;
}

table.frame-all {
    border-width: 1px;
}

table.frame-sides {
    border-width: 0 1px;
}

table.frame-topbot {
    border-width: 1px 0;
}

th.halign-left, td.halign-left {
    text-align: left;
}

th.halign-right, td.halign-right {
    text-align: right;
}

th.halign-center, td.halign-center {
    text-align: center;
}

th.valign-top, td.valign-top {
    vertical-align: top;
}

th.valign-bottom, td.valign-bottom {
    vertical-align: bottom;
}

th.valign-middle, td.valign-middle {
    vertical-align: middle;
}

table thead th, table tfoot th {
    font-weight: bold;
}

tbody tr th {
    display: table-cell;
    line-height: 1.6;
    background: #f7f8f7;
}

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p {
    color: rgba(0, 0, 0, 0.8);
    font-weight: bold;
}

p.tableblock > code:only-child {
    background: none;
    padding: 0;
}

p.tableblock {
    font-size: 1em;
}

td > div.verse {
    white-space: pre;
}

ol {
    margin-left: 1.75em;
}

ul li ol {
    margin-left: 1.5em;
}

dl dd {
    margin-left: 1.125em;
}

dl dd:last-child, dl dd:last-child > :last-child {
    margin-bottom: 0;
}

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist {
    margin-bottom: 0.625em;
}

ul.unstyled, ol.unnumbered, ul.checklist, ul.none {
    list-style-type: none;
}

ul.unstyled, ol.unnumbered, ul.checklist {
    margin-left: 0.625em;
}

ul.checklist li > p:first-child > .fa-check-square-o:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child {
    margin-right: 0.25em;
}

ul.checklist li > p:first-child > input[type="checkbox"]:first-child {
    position: relative;
    top: 1px;
}

ul.inline {
    margin: 0 auto 0.625em auto;
    margin-left: -1.375em;
    margin-right: 0;
    padding: 0;
    list-style: none;
    overflow: hidden;
}

ul.inline > li {
    list-style: none;
    float: left;
    margin-left: 1.375em;
    display: block;
}

ul.inline > li > * {
    display: block;
}

.unstyled dl dt {
    font-weight: normal;
    font-style: normal;
}

ol.arabic {
    list-style-type: decimal;
}

ol.decimal {
    list-style-type: decimal-leading-zero;
}

ol.loweralpha {
    list-style-type: lower-alpha;
}

ol.upperalpha {
    list-style-type: upper-alpha;
}

ol.lowerroman {
    list-style-type: lower-roman;
}

ol.upperroman {
    list-style-type: upper-roman;
}

ol.lowergreek {
    list-style-type: lower-greek;
}

.hdlist > table, .colist > table {
    border: 0;
    background: none;
}

.hdlist > table > tbody > tr, .colist > table > tbody > tr {
    background: none;
}

td.hdlist1 {
    padding-right: .75em;
    font-weight: bold;
}

td.hdlist1, td.hdlist2 {
    vertical-align: top;
}

.literalblock + .colist, .listingblock + .colist {
    margin-top: -0.5em;
}

.colist > table tr > td:first-of-type {
    padding: 0 0.75em;
    line-height: 1;
}

.colist > table tr > td:last-of-type {
    padding: 0.25em 0;
}

.thumb, .th {
    line-height: 0;
    display: inline-block;
    border: solid 4px white;
    -webkit-box-shadow: 0 0 0 1px #dddddd;
    box-shadow: 0 0 0 1px #dddddd;
}

.imageblock.left, .imageblock[style*="float: left"] {
    margin: 0.25em 0.625em 1.25em 0;
}

.imageblock.right, .imageblock[style*="float: right"] {
    margin: 0.25em 0 1.25em 0.625em;
}

.imageblock > .title {
    margin-bottom: 0;
}

.imageblock.thumb, .imageblock.th {
    border-width: 6px;
}

.imageblock.thumb > .title, .imageblock.th > .title {
    padding: 0 0.125em;
}

.image.left, .image.right {
    margin-top: 0.25em;
    margin-bottom: 0.25em;
    display: inline-block;
    line-height: 0;
}

.image.left {
    margin-right: 0.625em;
}

.image.right {
    margin-left: 0.625em;
}

a.image {
    text-decoration: none;
}

span.footnote, span.footnoteref {
    vertical-align: super;
    font-size: 0.875em;
}

span.footnote a, span.footnoteref a {
    text-decoration: none;
}

span.footnote a:active, span.footnoteref a:active {
    text-decoration: underline;
}

#footnotes {
    padding-top: 0.75em;
    padding-bottom: 0.75em;
    margin-bottom: 0.625em;
}

#footnotes hr {
    width: 20%;
    min-width: 6.25em;
    margin: -.25em 0 .75em 0;
    border-width: 1px 0 0 0;
}

#footnotes .footnote {
    padding: 0 0.375em;
    line-height: 1.3;
    font-size: 0.875em;
    margin-left: 1.2em;
    text-indent: -1.2em;
    margin-bottom: .2em;
}

#footnotes .footnote a:first-of-type {
    font-weight: bold;
    text-decoration: none;
}

#footnotes .footnote:last-of-type {
    margin-bottom: 0;
}

#content #footnotes {
    margin-top: -0.625em;
    margin-bottom: 0;
    padding: 0.75em 0;
}

.gist .file-data > table {
    border: 0;
    background: #fff;
    width: 100%;
    margin-bottom: 0;
}

.gist .file-data > table td.line-data {
    width: 99%;
}

div.unbreakable {
    page-break-inside: avoid;
}

.big {
    font-size: larger;
}

.small {
    font-size: smaller;
}

.underline {
    text-decoration: underline;
}

.overline {
    text-decoration: overline;
}

.line-through {
    text-decoration: line-through;
}

.aqua {
    color: #00bfbf;
}

.aqua-background {
    background-color: #00fafa;
}

.black {
    color: black;
}

.black-background {
    background-color: black;
}

.blue {
    color: #0000bf;
}

.blue-background {
    background-color: #0000fa;
}

.fuchsia {
    color: #bf00bf;
}

.fuchsia-background {
    background-color: #fa00fa;
}

.gray {
    color: #606060;
}

.gray-background {
    background-color: #7d7d7d;
}

.green {
    color: #006000;
}

.green-background {
    background-color: #007d00;
}

.lime {
    color: #00bf00;
}

.lime-background {
    background-color: #00fa00;
}

.maroon {
    color: #600000;
}

.maroon-background {
    background-color: #7d0000;
}

.navy {
    color: #000060;
}

.navy-background {
    background-color: #00007d;
}

.olive {
    color: #606000;
}

.olive-background {
    background-color: #7d7d00;
}

.purple {
    color: #600060;
}

.purple-background {
    background-color: #7d007d;
}

.red {
    color: #bf0000;
}

.red-background {
    background-color: #fa0000;
}

.silver {
    color: #909090;
}

.silver-background {
    background-color: #bcbcbc;
}

.teal {
    color: #006060;
}

.teal-background {
    background-color: #007d7d;
}

.white {
    color: #bfbfbf;
}

.white-background {
    background-color: #fafafa;
}

.yellow {
    color: #bfbf00;
}

.yellow-background {
    background-color: #fafa00;
}

span.icon > .fa {
    cursor: default;
}

.admonitionblock td.icon [class^="fa icon-"] {
    font-size: 2.5em;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    cursor: default;
}

.admonitionblock td.icon .icon-note:before {
    content: "\f05a";
    color: #19407c;
}

.admonitionblock td.icon .icon-tip:before {
    content: "\f0eb";
    text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8);
    color: #111;
}

.admonitionblock td.icon .icon-warning:before {
    content: "\f071";
    color: #bf6900;
}

.admonitionblock td.icon .icon-caution:before {
    content: "\f06d";
    color: #bf3400;
}

.admonitionblock td.icon .icon-important:before {
    content: "\f06a";
    color: #bf0000;
}

.conum[data-value] {
    display: inline-block;
    color: #fff !important;
    background-color: rgba(0, 0, 0, 0.8);
    -webkit-border-radius: 100px;
    border-radius: 100px;
    text-align: center;
    font-size: 0.75em;
    width: 1.67em;
    height: 1.67em;
    line-height: 1.67em;
    font-family: "Open Sans", "DejaVu Sans", sans-serif;
    font-style: normal;
    font-weight: bold;
}

.conum[data-value] * {
    color: #fff !important;
}

.conum[data-value] + b {
    display: none;
}

.conum[data-value]:after {
    content: attr(data-value);
}

pre .conum[data-value] {
    position: relative;
    top: -0.125em;
}

b.conum * {
    color: inherit !important;
}

.conum:not([data-value]):empty {
    display: none;
}

h1, h2 {
    letter-spacing: -0.01em;
}

dt, th.tableblock, td.content {
    text-rendering: optimizeLegibility;
}

p, td.content {
    letter-spacing: -0.01em;
}

p strong, td.content strong {
    letter-spacing: -0.005em;
}

p, blockquote, dt, td.content {
    font-size: 1.0625rem;
}

p {
    margin-bottom: 1.25rem;
}

.sidebarblock p, .sidebarblock dt, .sidebarblock td.content, p.tableblock {
    font-size: 1em;
}

.exampleblock > .content {
    background-color: #fffef7;
    border-color: #e0e0dc;
    -webkit-box-shadow: 0 1px 4px #e0e0dc;
    box-shadow: 0 1px 4px #e0e0dc;
}

.print-only {
    display: none !important;
}

@media print {
    @page {
        margin: 1.25cm 0.75cm;
    }

    * {
        -webkit-box-shadow: none !important;
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a {
        color: inherit !important;
        text-decoration: underline !important;
    }

    a.bare, a[href^="#"], a[href^="mailto:"] {
        text-decoration: none !important;
    }

    a[href^="http:"]:not(.bare):after, a[href^="https:"]:not(.bare):after, a[href^="mailto:"]:not(.bare):after {
        content: "(" attr(href) ")";
        display: inline-block;
        font-size: 0.875em;
        padding-left: 0.25em;
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    pre, blockquote, tr, img {
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group;
    }

    img {
        max-width: 100% !important;
    }

    p, blockquote, dt, td.content {
        font-size: 1em;
        orphans: 3;
        widows: 3;
    }

    h2, h3, #toctitle, .sidebarblock > .content > .title, #toctitle, .sidebarblock > .content > .title {
        page-break-after: avoid;
    }

    #toc, .sidebarblock, .exampleblock > .content {
        background: none !important;
    }

    #toc {
        border-bottom: 1px solid #ddddd8 !important;
        padding-bottom: 0 !important;
    }

    .sect1 {
        padding-bottom: 0 !important;
    }

    .sect1 + .sect1 {
        border: 0 !important;
    }

    #header > h1:first-child {
        margin-top: 1.25rem;
    }

    body.book #header {
        text-align: center;
    }

    body.book #header > h1:first-child {
        border: 0 !important;
        margin: 2.5em 0 1em 0;
    }

    body.book #header .details {
        border: 0 !important;
        display: block;
        padding: 0 !important;
    }

    body.book #header .details span:first-child {
        margin-left: 0 !important;
    }

    body.book #header .details br {
        display: block;
    }

    body.book #header .details br + span:before {
        content: none !important;
    }

    body.book #toc {
        border: 0 !important;
        text-align: left !important;
        padding: 0 !important;
        margin: 0 !important;
    }

    body.book #toc, body.book #preamble, body.book h1.sect0, body.book .sect1 > h2 {
        page-break-before: always;
    }

    .listingblock code[data-lang]:before {
        display: block;
    }

    #footer {
        background: none !important;
        padding: 0 0.9375em;
    }

    #footer-text {
        color: rgba(0, 0, 0, 0.6) !important;
        font-size: 0.9em;
    }

    .hide-on-print {
        display: none !important;
    }

    .print-only {
        display: block !important;
    }

    .hide-for-print {
        display: none !important;
    }

    .show-for-print {
        display: inherit !important;
    }
}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
<h1><strong><strong>でき ぬ?　　　　　　　Gentoo Prefix</strong></strong></h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>C90 西f-14a</p>
</div>
</blockquote>
<div class="attribution">
&#8212; 拝承製作所
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="true-"><a class="anchor" href="#true-"></a>はじめに</h2>
<div class="sectionbody">
<div class="paragraph">
<p>こんにちは、(オズ) @Wizard_of_Oz__といいます。
お手にとっていただき有り難うございます。
Gentoo Installしてますか？</p>
</div>
<div class="paragraph">
<p>この本を手にとって頂いた方ならご存知だと思いますが、
Gentooはカーネルから自分で選択することができる素晴らしいLinuxディストリビューションです。
とはいえGentooは使ってみたいが満足する環境を作るのが大変だという方や、
今まで構築してきたLinux環境を壊せない、使える環境や借りたVSPが
OSインストールの自由度がない環境という方もいるでしょう。</p>
</div>
<div class="paragraph">
<p>そのような環境でもGentooの一端を味わうことが出来ます。
Gentoo PrefixはGentooの高い自由度の元になっているパッケージマネージャーを
他のプラットホームでも使えるというものです。</p>
</div>
<div class="paragraph">
<p>さらに、Gentoo Prefixのインストールには管理者権限は必要ありません。
つまりあなたがルート権限もなく好きなソフトも入れられない環境でも
Gentoo Prefixを使えばあんなソフトやこんなソフトもインストールすることが出来るかもしれません。</p>
</div>
<div class="paragraph">
<p>次からGentoo Prefixのインストール方法について説明していきます。</p>
</div>
<div class="listingblock">
<div class="title">おねがい</div>
<div class="content">
<pre>今回本を書くに辺りいろいろ調べたり試したりしましたが、
今まで永く使ってきたというわけではないので正しくないやり方や
もっと良いやり方があるかと思われます。
もしそのような点がありましたらぜひとも教えて頂けないでしょうか。
やさしめのマサカリ待ってます。</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truegentoo-prefix"><a class="anchor" href="#truegentoo-prefix"></a>Gentoo Prefixのインストール</h2>
<div class="sectionbody">
<div class="paragraph">
<p>それではGentoo Prefixのインストール方法について説明します。<br>
ここで一番大事なことは、このページ <a href="https://wiki.gentoo.org/wiki/Prefix/libc" class="bare">https://wiki.gentoo.org/wiki/Prefix/libc</a> にある<br>
bootstrap-rap.sh (<a href="http://dev.gentoo.org/~heroxbd/bootstrap-rap.sh" class="bare">http://dev.gentoo.org/~heroxbd/bootstrap-rap.sh</a>) を使うということです。<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>最初Project:Prefix(<a href="https://wiki.gentoo.org/wiki/Project:Prefix)のページを見て" class="bare">https://wiki.gentoo.org/wiki/Project:Prefix)のページを見て</a>
bootstrap-prefix.shを使ったインストールを試しました。
しかしどの環境でも途中でエラーとなり色々試しましたが結局は成功しませんでした。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Gentoo Prefixはデフォルトではrootユーザはインストールできません。
ここに詳細は記載しませんが、上記ページのManual Installationであればrootユーザでも
問題なくインストールできるので、rootで使いたい方はそちらを参照してみてください。</p>
</div>
<div class="paragraph">
<p>コンパイラも必要となります。下記のようにコンパイラをインストールしましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Ubuntu: $sudo apt install build-essential
CentOS: $sudo yum install gcc</pre>
</div>
</div>
<div class="paragraph">
<p>上記の準備が整ったらあとはスクリプトをダウンロードして実行権限を与えて実行するだけです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>user $ wget http://dev.gentoo.org/~heroxbd/bootstrap-rap.sh
user $ chmod 755 bootstrap-rap.sh
user $ ./bootstrap-rap.sh

                                             .
       .vir.                                d$b
    .d$$$$$$b.    .cd$$b.     .d$$b.   d$$$$$$$$$$$b  .d$$b.      .d$$b.
    $$$$( )$$$b d$$$()$$$.   d$$$$$$$b Q$$$$$$$P$$$P.$$$$$$$b.  .$$$$$$$b.
    Q$$$$$$$$$$B$$$$$$$$P"  d$$$PQ$$$$b.   $$$$.   .$$$P' `$$$ .$$$P' `$$$
      "$$$$$$$P Q$$$$$$$b  d$$$P   Q$$$$b  $$$$b   $$$$b..d$$$ $$$$b..d$$$
     d$$$$$$P"   "$$$$$$$$ Q$$$     Q$$$$  $$$$$   `Q$$$$$$$P  `Q$$$$$$$P
    $$$$$$$P       `"""""   ""        ""   Q$$$P     "Q$$$P"     "Q$$$P"
    `Q$$P"                                  """

             Welcome to the Gentoo Prefix interactive installer!


    I will attempt to install Gentoo Prefix on your system.  To do so, I'll
    ask  you some questions first.    After that,  you'll have to  practise
    patience as your computer and I try to figure out a way to get a lot of
    software  packages  compiled.    If everything  goes according to plan,
    you'll end up with what we call  "a Prefix install",  but by that time,
    I'll tell you more.


Do you want me to start off now? [Yn]</pre>
</div>
</div>
<div class="paragraph">
<p>インストールを続けてもいいか確認されるのでyで続けます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>It seems to me you are 'user' (1000), that looks cool to me.

I'm going to check for some variables in your environment now:
  it appears ASFLAGS is not set :)
  it appears CFLAGS is not set :)
  it appears CPPFLAGS is not set :)
  it appears CXXFLAGS is not set :)
  it appears DYLD_LIBRARY_PATH is not set :)
  it appears GREP_OPTIONS is not set :)
  it appears LDFLAGS is not set :)
  it appears LD_LIBRARY_PATH is not set :)
  it appears LIBPATH is not set :)
  it appears PERL_MM_OPT is not set :)
  it appears PKG_CONFIG_PATH is not set :)
  it appears PYTHONPATH is not set :)
  it appears ROOT is not set :)

I'm excited!  Seems we can finally do something productive now.

Ok, I'm going to do a little bit of guesswork here.  Thing is, your
machine appears to be identified by CHOST=x86_64-pc-linux-gnu.

Great!  You appear to have a compiler in your PATH


I did my utmost best, and found that you have 4 cpu cores.  If
this looks wrong to you, you can happily ignore me.  Based on the number
of cores you have, I came up with the idea of parallelising compilation
work where possible with 3 parallel make threads.  If you have no
clue what this means, you should go with my excellent default I've
chosen below, really!

How many parallel make jobs do you want? [3]</pre>
</div>
</div>
<div class="paragraph">
<p>次に並列ジョブ数をいくつにするか確認されます。上に自分のマシンのコア数が表示されており、
それから適した値が自動的にデフォルト値として選択されているはずです。
負荷を掛けたくない、全力でコンパイルしたいなど希望がある場合は自分で
好きな数を入力してエンターを押します。
特に希望がない場合はそのままエンターを押せばカッコの値で進みます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Each and every Prefix has a home.  That is, a place where everything is
supposed to be in.  That place must be fully writable by you (duh), but
should also be able to hold some fair amount of data and preferably be
reasonably fast.  In terms of space, I advise something around 2GiB
(it's less if you're lucky).  I suggest a reasonably fast place because
we're going to compile a lot, and that generates a fair bit of IO.  If
some networked filesystem like NFS is the only option for you, then
you're just going to have to wait a fair bit longer.
This place which is your Prefix' home, is often referred to by a
variable called EPREFIX.

What do you want EPREFIX to be? [/home/user/gentoo]</pre>
</div>
</div>
<div class="paragraph">
<p>Gentoo Prefixをどこにインストールするか確認されます。
デフォルトでは自分のホームフォルダにgentooというフォルダが作られると思います。
希望があれば場所を入力し、特に希望がなければそのままエンターでOKです。
対象フォルダはなければ自動で作られます。。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OK!  I'm going to give it a try, this is what I have collected sofar:
  EPREFIX=/home/user/gentoo
  CHOST=x86_64-pc-linux-gnu
  PATH=/home/user/gentoo/usr/bin:/home/user/gentoo/bin:/home/user/gentoo/tmp/usr/bin:/home/user/gentoo/tmp/bin:/usr/bin:/bin
  MAKEOPTS=-j3

I'm now going to make an awful lot of noise going through a sequence of
stages to make your box as groovy as I am myself, setting up your
Prefix.  In short, I'm going to run stage1, stage2, stage3, followed by
emerge -e system.  If any of these stages fail, both you and me are in
deep trouble.  So let's hope that doesn't happen.

Type here what you want to wish me [luck]</pre>
</div>
</div>
<div class="paragraph">
<p>最後の確認です。うまく行くことを祈りたい場合はluckと入力しましょう。
とくに何も入力しなくても問題はありません。
別のことを入力してもちょっと怒られるだけでそのまま進みます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#Huh?  You're not serious, are you?</pre>
</div>
</div>
<div class="paragraph">
<p>インストールの操作は以上です。待っていれば特に問題なくインストール終了するはずです。
もしも止まっても、再度やり直せば進むと思います。</p>
</div>
<div class="paragraph">
<p>ちなみにインストール完了までの時間ですが、Azure上で2core7GB環境を借りた所3時間程かかりました。
出かける前や寝る前などに流しておくといいでしょう。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truegentoo-prefix-2"><a class="anchor" href="#truegentoo-prefix-2"></a>Gentoo Prefix起動</h2>
<div class="sectionbody">
<div class="paragraph">
<p>特に問題なくインストール完了すると、以下のメッセージが表示されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Woah!  Everything just worked!  Now YOU should run
/home/user/gentoo/startprefix
and enjoy!  Thanks for using me, it was a pleasure to work with you.</pre>
</div>
</div>
<div class="paragraph">
<p>メッセージの通りstartprefix.shを実行しましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>user $ ./gentoo/startprefix.sh</pre>
</div>
</div>
<div class="paragraph">
<p>Ubuntu環境だとlesspipeがどうのと表示が出るかもしれません。
.bashrcのlesspipeのところで出ているようですが
とくに調べていませんが無視しても問題なさそうです。</p>
</div>
<div class="paragraph">
<p>おめでとうございます。ついにGentoo Prefix環境を使用することが出来ます。
これでemergeコマンドなどが使用できるようになります。
ひとまず試してみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ emerge -av sl</pre>
</div>
</div>
<div class="paragraph">
<p>おそらく問題なく完了すると思います。それでは実行してみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ sl</pre>
</div>
</div>
<div class="paragraph">
<p>……なんだか昔見たのとくらべてえらくパワーアップしてる気がしますが、
うまく動いていることが確認できると思います。</p>
</div>
<div class="paragraph">
<p>長い長いslコマンドが終わったら、そのコマンドがどこにあるか確認してみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ which sl
/home/user/gentoo/usr/bin/sl</pre>
</div>
</div>
<div class="paragraph">
<p>Gentoo Prefixをインストールした場所の下に通常のLinxuと同じような構成で
インストールされているのが解ると思います。
またlsなどのコマンドもGentoo Prefixのものが使用されるようになっています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ which ls</pre>
</div>
</div>
<div class="paragraph">
<p>などして確認してみましょう。</p>
</div>
<div class="paragraph">
<p>Gentoo Prefixでインストールされていないものは元のOSのものが使用されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ which apt
/usr/bin/apt</pre>
</div>
</div>
<div class="paragraph">
<p>全てをGentoo Prefixでインストールする必要はなく、必要に応じて使い分けていくといいでしょう。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="true--2"><a class="anchor" href="#true--2"></a>インストール完了後</h2>
<div class="sectionbody">
<div class="paragraph">
<p>さて、インストールは完了しましたが、Gentoo WikiにいくつかTipsが乗っているので
それらを実行していきましょう。</p>
</div>
<div class="sect2">
<h3 id="truesynchronize-with-the-rap-repository"><a class="anchor" href="#truesynchronize-with-the-rap-repository"></a>Synchronize with the RAP repository</h3>
<div class="paragraph">
<p>なにやらmain gentoo repositoryにまだマージされてないパッチのリポジトリのようで
通常はアップデートの必要はないと記載されていますが設定してみましょう。
まずは書いてあるとおりにコマンドを実行していきます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>user $emerge dev-vcs/git # needed for sync
...
The following USE changes are necessary to proceed:
(see "package.use" in the portage(5) man page for more details)
# required by dev-scheme/guile-2.0.12-r1::gentoo
# required by sys-devel/autogen-5.18.10::gentoo
# required by net-libs/gnutls-3.4.14::gentoo[tools]
# required by app-crypt/gnupg-2.1.14-r1::gentoo[gnutls]
# required by dev-vcs/git-2.9.2::gentoo[gpg]
# required by dev-vcs/git (argument)
&gt;=dev-libs/boehm-gc-7.4.2 threads</pre>
</div>
</div>
<div class="paragraph">
<p>USEフラグを追加しろと言われてしまいましたね。
設定ファイルは以下に存在します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/home/user/gentoo/etc/portage/package.use</pre>
</div>
</div>
<div class="paragraph">
<p>手動で設定してもいいですが、面倒なので自動で追加しましょう。
-aオプションを追加してautounmaskで設定しましょう。
再度以下のようにemergeを実行します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ emerge -av dev-vcs/git
...
Would you like to add these changes to your config files? [Yes/No] y</pre>
</div>
</div>
<div class="paragraph">
<p>コンフィグファイルを変更するか確認されるのでyを入力しましょう。
これだけではすぐ変更は反映されないので、dispatch-confを実行しましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ dispatch-conf</pre>
</div>
</div>
<div class="paragraph">
<p>初めてdispatch-confを実行する場合、etc/hostsの変更をどうするか確認されるかもしれません。
特に理由がなければ更新しておきましょう。下に説明が出ていますが、
uを押すと表示されているとおりに更新されます。
次にpackage.useの更新が確認されるので、同じようにuを押して更新しましょう。</p>
</div>
<div class="paragraph">
<p>再度gitのインストールを行います、</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ emerge dev-vcs/git</pre>
</div>
</div>
<div class="paragraph">
<p>おや、エラーが出てしまいました。以下がエラー全体を抜き出したものになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mv: cannot stat '/home/user/gentoo/var/tmp/portage/dev-scheme/guile-2.0.12-r1/image//usr/lib64/libguile-*-gdb.scm': No such file or directory
 * ERROR: dev-scheme/guile-2.0.12-r1::gentoo failed (install phase):
 *   (no error message)
 *
 * Call stack:
 *     ebuild.sh, line 115:  Called src_install
 *   environment, line 2352:  Called die
 * The specific snippet of code:
 *       mv "${D}"/usr/$(get_libdir)/libguile-*-gdb.scm "${D}"/usr/share/gdb/auto-load/$(get_libdir) || die;
 *
 * If you need support, post the output of `emerge --info '=dev-scheme/guile-2.0.12-r1::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=dev-scheme/guile-2.0.12-r1::gentoo'`.
 * The complete build log is located at '/home/user/gentoo/var/tmp/portage/dev-scheme/guile-2.0.12-r1/temp/build.log'.
 * The ebuild environment file is located at '/home/user/gentoo/var/tmp/portage/dev-scheme/guile-2.0.12-r1/temp/environment'.
 * Working directory: '/home/user/gentoo/var/tmp/portage/dev-scheme/guile-2.0.12-r1/work/guile-2.0.12'
 * S: '/home/user/gentoo/var/tmp/portage/dev-scheme/guile-2.0.12-r1/work/guile-2.0.12'

&gt;&gt;&gt; Failed to emerge dev-scheme/guile-2.0.12-r1, Log file:

&gt;&gt;&gt;  '/home/user/gentoo/var/tmp/portage/dev-scheme/guile-2.0.12-r1/temp/build.log'</pre>
</div>
</div>
<div class="paragraph">
<p>ここで注目するところはまずここです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mv: cannot stat '/home/user/gentoo/var/tmp/portage/dev-scheme/guile-2.0.12-r1/image//usr/lib64/libguile-*-gdb.scm': No such file or directory</pre>
</div>
</div>
<div class="paragraph">
<p>どうやらlibguile-*gdb.scmが見つからないために失敗したようですね。
Call stack:の記載を確認すると、ebuild.shのsrc_installの部分で失敗しているようです。
失敗したコード(specific snippet of code)は下記のようになっていますね。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mv "${D}"/usr/$(get_libdir)/libguile-*-gdb.scm "${D}"/usr/share/gdb/auto-load/$(get_libdir) || die;</pre>
</div>
</div>
<div class="paragraph">
<p>実際にインストール中のファイルを確認してみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/home/user/gentoo/var/tmp/portage/dev-scheme/guile-2.0.12-r1/image/</pre>
</div>
</div>
<div class="paragraph">
<p>と潜って行くと、次にあるのはusrディレクトリではなくhomeディレクトリがあるはずです。
更に潜って行くと、以下の場所にファイルが見つかるはずです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/home/user/gentoo/var/tmp/portage/dev-scheme/guile-2.0.12-r1/image/home/user/gentoo/usr/lib64/libguile-*-gdb.scm</pre>
</div>
</div>
<div class="paragraph">
<p>ここでもう一度snippet of codeを見てみましょう。
${D}の部分が正しく展開されていないように見えます。
この${D}というのは何なのでしょうか。これは各ソフトをインストールする手順を記載してあるebuildファイルに使われているものです。
このページ (<a href="https://devmanual.gentoo.org/eclass-reference/ebuild/" class="bare">https://devmanual.gentoo.org/eclass-reference/ebuild/</a>) を見ると、以下のような説明があります。</p>
</div>
<div class="exampleblock">
<div class="title">VARIABLES</div>
<div class="content">
<div class="paragraph">
<p><strong>D = ${PORTAGE_TMPDIR}/portage/${CATEGORY}/${PF}/image/</strong></p>
</div>
<div class="paragraph">
<p>Contains the path to the temporary install directory. Every write operation that does not involve the helper tools and functions (found below) should be prefixed with ${D}. Beginning with EAPI 3, the offset prefix often needs to be taken into account here, for which the variable ${ED} is provided (see below). Do not modify this variable.</p>
</div>
<div class="paragraph">
<p><strong>ED = ${PORTAGE_TMPDIR}/portage/${CATEGORY}/${PF}/image/${EPREFIX}/</strong></p>
</div>
<div class="paragraph">
<p>Beginning with EAPI 3, contains the path "${D%/}${EPREFIX}/" for convenience purposes. For EAPI values prior to EAPI 3 which do not support ED, helpers use D where they would otherwise use ED. Do not modify this variable.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>これを見ると原因が分かりますね。${D}というのはGentoo Prefix($EPREFIX)が考慮されていない変数のようです。
EPREFIXはインストール時に指定したGentoo Prefixをインストールしたディレクトリになります。
ちょうど今回抜けていた/home/user/gentooが格納されているものですね。
${ED}を使用することでちゃんとGentoo Prefix環境でもインストールできそうです。</p>
</div>
<div class="paragraph">
<p>では実際に試してみましょう。インストール手順を記載してあるebuidファイルは以下に格納されています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/home/user/gentoo/usr/portage/dev-scheme/guile/guile-2.0.12-r1.ebuild</pre>
</div>
</div>
<div class="paragraph">
<p>このファイルの中身を見ると、snippet of codeで表示されていた行が見つかるはずです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ nano /home/user/gentoo/usr/portage/dev-scheme/guile/guile-2.0.12-r1.ebuild

src_install() {
...
    mv "${D}"/usr/$(get_libdir)/libguile-*-gdb.scm "${D}"/usr/share/gdb/auto-load/$(get_libdir) || die</pre>
</div>
</div>
<div class="paragraph">
<p>この行を以下のように書き換えます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    mv "${ED}"/usr/$(get_libdir)/libguile-*-gdb.scm "${ED}"/usr/share/gdb/auto-load/$(get_libdir) || die</pre>
</div>
</div>
<div class="paragraph">
<p>このファイルを保存してもそのままでは動きません。
ebuildファイルを変更した場合は以下のように実行し、manifestファイルを再作成する必要があります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ebuild /home/user/gentoo/usr/portage/dev-scheme/guile/guile-2.0.12-r1.ebuild digest
&gt;&gt;&gt; Creating Manifest for /home/user/gentoo/usr/portage/dev-scheme/guile</pre>
</div>
</div>
<div class="paragraph">
<p>あとは再度emergeを実行するだけです。今度はguileで失敗せずに最後までインストールできると思います。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ emerge dev-vcs/git
...
 * Messages for package dev-vcs/git-2.9.2:

 * These additional scripts need some dependencies:
 *   git-quiltimport  : dev-util/quilt
 *   git-instaweb     : || ( www-servers/lighttpd www-servers/apache www-servers/nginx )
&gt;&gt;&gt; Auto-cleaning packages...

&gt;&gt;&gt; No outdated packages were found on your system.</pre>
</div>
</div>
<div class="paragraph">
<p>長くなってしまいましたが、これでgitがインストール出来ました。
残念ながらそれぞれのパッケージでPrefixは十分考慮されているとは言えず、ちょくちょくインストールに失敗してしまいます。<br>
しかしエラーメッセージを見ればほとんどの問題は簡単に対処できると思います。
特にebuildで${D}を指定しているため失敗するケースが多いため、上記の
エラーの見方や対応を一度体験しておけば問題ないと思います。</p>
</div>
<div class="paragraph">
<p>さて、元の話題に戻りましょう。RAP repositoryをアップデートするのが目的でした。
Wikiの次の行のコマンドを見てみると、以下のようになっています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>user $[ -d ${EPREFIX}/usr/portage-stage/.git ] || rm -rf ${EPREFIX}/usr/portage-stage</pre>
</div>
</div>
<div class="paragraph">
<p>しかし${EPREFIX}はManual Installを実施していなければ設定されていないはずです。
自分で${EPREFIX}を設定するか補ってあげましょう。
実際にやっていることは下記ディレクトリが存在するか確認しているだけです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/home/user/gentoo/usr/portage-stage/.git</pre>
</div>
</div>
<div class="paragraph">
<p>インストールしたばかりであればこのディレクトリは存在してないはずですので、
コマンドの通り下記ディレクトリを削除しましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>user $ rm -rf /home/user/gentoo/usr/portage-stage</pre>
</div>
</div>
<div class="paragraph">
<p>削除したあとは下記コマンドを実行することでportage-stageが更新されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>user $emaint sync -r rap</pre>
</div>
</div>
<div class="paragraph">
<p>これでSynchronize with the RAP repositoryの対応は終了です。<br>
はじめgitのインストールで長々と解説しましたが、
実はemergeでgitをインストールしなくても、元のOS側でgitをインストールできれば進むことが出来ます。
ただebuildの${D}でインストールが失敗する問題はたびたび発生するため、最初に説明させて頂きました。</p>
</div>
</div>
<div class="sect2">
<h3 id="truecompile-inside-memory"><a class="anchor" href="#truecompile-inside-memory"></a>Compile Inside Memory</h3>
<div class="paragraph">
<p>こちらはコンパイル時にメモリを使用するためのTipsですね。<br>
メモリをたくさん積んでいる方は試してみてもいいかもしれません。<br>
(私はまだ試してないので細かいことが書けないのです&#8230;&#8203;)<br></p>
</div>
</div>
<div class="sect2">
<h3 id="trueadd-an-en_us-utf-8-locale"><a class="anchor" href="#trueadd-an-en_us-utf-8-locale"></a>Add an en_US.UTF-8 locale</h3>
<div class="paragraph">
<p>ロケールの設定ですね。localeコマンドを実行してもらえれば分かりますが、
最初のロケールはPosixになっています。記載に従ってロケールを変更してみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ nano /home/user/gentoo/etc/locale.gen</pre>
</div>
</div>
<div class="paragraph">
<p>各種ロケールが全てコメントアウトされた状態になっています。
この本を読んでいるということはおそらく日本語話者だとおもいますので、
下記2つのコメントアウトを外すのがお勧めです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>en_US.UTF-8 UTF-8
ja_JP.UTF-8 UTF-8</pre>
</div>
</div>
<div class="paragraph">
<p>コメントアウトを外しましたらlocale-genを実行しましょう。</p>
</div>
<div class="paragraph">
<p>Wikiにはここまでしか記載されていませんが、ここまでではまだlocaleは変更されません。<br>
eselectでlocaleを確認し、選択しましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>user $ eselect locale list
Available targets for the LANG variable:
  [1]   C
  [2]   POSIX
  [3]   en_US.utf8
  [4]   ja_JP.utf8
  [ ]   (free form)
user $ eselect locale set 4</pre>
</div>
</div>
<div class="paragraph">
<p>これでlocaleが日本語に変わりました。</p>
</div>
</div>
<div class="sect2">
<h3 id="trueuse-a-nearby-mirror"><a class="anchor" href="#trueuse-a-nearby-mirror"></a>Use a nearby mirror</h3>
<div class="paragraph">
<p>ダウンロード先を近くに変更する方法ですね。
bootstrap時にも有効なようですが気づかなかったので自分は試せていません。
インストール後もmake.confに設定することでミラーを使用してくれるようになります。
Prefixでは使用していませんが、自分のGentoo環境では以下を使用していました。(現在はGit経由にしているので使っていませんが)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>http://ftp.jaist.ac.jp/pub/Linux/Gentoo/</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="true--3"><a class="anchor" href="#true--3"></a>使用事例</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ここまで説明した内容でGentoo Prefixが使えるようになったと思います。
実際のGentoo Prefixの使い道の説明としての一例を示したいと思います。</p>
</div>
<div class="paragraph">
<p>今回Gentoo Prefixについて調べたのはDTIのServersManというVPSを借りたところからです。
このVPSは最安467円(税抜)で借りられるというもので、
自宅で常時稼働させているサービスを移して常時稼働させているサーバを減らそうと行ったものでした。</p>
</div>
<div class="paragraph">
<p>しかし(安さにつられて)実際借りてみると、OSはCentOS, Debian, Ubuntuしか選択できず、
Ubuntuは最新でも14.04までと言ったものでした。
さらにUbuntuをインストールしてアップグレードすればいいかとログインしてみた所
仮想化にはKVMなどが使用されているのではなくOpenVZ(いわゆるコンテナ)が使用されており
アップグレードもカーネルの変更も出来ないと行ったものでした。</p>
</div>
<div class="paragraph">
<p>そこでGentoo Prefixを使用することにより、使用したいバージョンの
プログラムを使用できるようになりました。
結果的に月500円ほどでサービスを動かせるようになりましたので
DTIも悪くないかなと思います。
ただ、使用できるリソースはかなり制限されるようで、
Gentoo Prefixをインストールしていると長期間リソースを使用したからか
CPU使用率が20%に制限されてインストール完了まで48時間ほどかかりましたが……</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="true-mikutter"><a class="anchor" href="#true-mikutter"></a>おまけ:mikutterインストール</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Gentoo Prefix環境を使用することでGentooで提供されている新しいパッケージを使用できるようになります。
ちょうどつい先日Gentoo Developerのなおたさんがmikutter-3.4.2をリリースしてくれたので、これをインストールしてみようと思います。<br>
(本当に直前(8/12)にリリースされたので今まさに確認しながらこれを書いています)</p>
</div>
<div class="paragraph">
<p>まずmikutterをインストールする前に、make.confを編集します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ nano /home/user/gentoo/etc/portage/make.conf</pre>
</div>
</div>
<div class="paragraph">
<p>後ろにRUBY_TARGETの指定を追加します。
(これがないとパッケージのコンフリクトが発生します)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>RUBY_TARGETS="ruby21"</pre>
</div>
</div>
<div class="paragraph">
<p>また、USEにXを追加します。これがないとgtkがうまくインストールされません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>USE="unicode nls X"</pre>
</div>
</div>
<div class="paragraph">
<p>make.confの編集が終わるとmikutterのインストールを行います。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ emerge -av mikutter</pre>
</div>
</div>
<div class="paragraph">
<p>最初はUSEの追加が要求されるので、yesとした後dispatch-confで追加します。
再度emergeを実行してしばらく待つと以下のようなエラーが出ます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; Completed installing alsa-utils-1.1.2 into /home/user/gentoo/var/tmp/portage/media-sound/alsa-utils-1.1.2/image/

 * Final size of build directory: 6712 KiB
 * Final size of installed tree: 2372 KiB

 * QA Notice: the following files are outside of the prefix:
 * /var
 * /var/lib
 * /var/lib/alsa
 * /lib
 * /lib/udev
 * /lib/udev/rules.d
 * /lib/udev/rules.d/90-alsa-restore.rules
 * ERROR: media-sound/alsa-utils-1.1.2::gentoo failed:
 *   Aborting due to QA concerns: there are files installed outside the prefix
 *
 * Call stack:
 *   misc-functions.sh, line 603:  Called install_qa_check
 *   misc-functions.sh, line 217:  Called source 'install_symlink_html_docs'
 *            05prefix, line 114:  Called install_qa_check_prefix
 *            05prefix, line  27:  Called die
 * The specific snippet of code:
 *                      die "Aborting due to QA concerns: there are files installed outside the prefix"
 *
 * If you need support, post the output of `emerge --info '=media-sound/alsa-utils-1.1.2::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=media-sound/alsa-utils-1.1.2::gentoo'`.
 * The complete build log is located at '/home/user/gentoo/var/tmp/portage/media-sound/alsa-utils-1.1.2/temp/build.log'.
 * The ebuild environment file is located at '/home/user/gentoo/var/tmp/portage/media-sound/alsa-utils-1.1.2/temp/environment'.
 * Working directory: '/home/user/gentoo/var/tmp/portage/media-sound/alsa-utils-1.1.2/image/home/user/gentoo'
 * S: '/home/user/gentoo/var/tmp/portage/media-sound/alsa-utils-1.1.2/work/alsa-utils-1.1.2'
!!! post install failed; exiting.</pre>
</div>
</div>
<div class="paragraph">
<p>どうやらコンパイルはうまく行っているようですが、QAフェーズで問題を見つけたようです。
QA Noticeをそのまま読むとalsaで使用する/var/lib/alsaなどがprefixの範囲外のためという事のようです。
対応として今回はalsa自体を使用しないようにしてみようと思います。どうせ音鳴らないだけですしね。</p>
</div>
<div class="paragraph">
<p>前と同じようにebuildファイルを修正します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ nano gentoo/usr/portage/net-misc/mikutter/mikutter-3.4.2.ebuild</pre>
</div>
</div>
<div class="paragraph">
<p>ebuild内に以下の項目が見つかります。おそらくここでalsaを使用するよう依存関係を設定しているのでしょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>RDEPEND="
        libnotify? ( x11-libs/libnotify )
        media-sound/alsa-utils"</pre>
</div>
</div>
<div class="paragraph">
<p>ここで思い切って以下のように修正してみます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>RDEPEND="
        libnotify? ( x11-libs/libnotify )"
#        media-sound/alsa-utils"</pre>
</div>
</div>
<div class="paragraph">
<p>ebuildを修正した後は以前と同様にmanifestファイルを更新します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ebuild gentoo/usr/portage/net-misc/mikutter/mikutter-3.4.2.ebuild digest</pre>
</div>
</div>
<div class="paragraph">
<p>再度mikutterのインストールを開始してみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ emerge -av mikutter</pre>
</div>
</div>
<div class="paragraph">
<p>うまく行ったようです。alsaを飛ばしてコンパイルをはじめました。</p>
</div>
<div class="paragraph">
<p>しばらくするとまた停止しました。ruby-2.1.10ですね。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>* ERROR: dev-lang/ruby-2.1.10::gentoo failed (install phase):
 *   rm rubygems failed
 *
 * Call stack:
 *     ebuild.sh, line 115:  Called src_install
 *   environment, line 3215:  Called die
 * The specific snippet of code:
 *       rm -r "${D}/usr/$(get_libdir)/ruby/${RUBYVERSION}/rubygems" || die "rm rubygems failed";
 *
 * If you need support, post the output of `emerge --info '=dev-lang/ruby-2.1.10::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=dev-lang/ruby-2.1.10::gentoo'`.
 * The complete build log is located at '/home/user/gentoo/var/tmp/portage/dev-lang/ruby-2.1.10/temp/build.log'.
 * The ebuild environment file is located at '/home/user/gentoo/var/tmp/portage/dev-lang/ruby-2.1.10/temp/environment'.
 * Working directory: '/home/user/gentoo/var/tmp/portage/dev-lang/ruby-2.1.10/work/ruby-2.1.10'
 * S: '/home/user/gentoo/var/tmp/portage/dev-lang/ruby-2.1.10/work/ruby-2.1.10'

&gt;&gt;&gt; Failed to emerge dev-lang/ruby-2.1.10, Log file:

&gt;&gt;&gt;  '/home/user/gentoo/var/tmp/portage/dev-lang/ruby-2.1.10/temp/build.log'</pre>
</div>
</div>
<div class="paragraph">
<p>これはebuildで使用している変数が${D}になっているやつですね。
今までと同様に直していきましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ nano gentoo/usr/portage/dev-lang/ruby/ruby-2.1.10.ebuild
3行とも${D}を${ED}に変換
    # Remove installed rubygems copy
    rm -r "${ED}/usr/$(get_libdir)/ruby/${RUBYVERSION}/rubygems" || die "rm rubygems failed"
    rm -r "${ED}/usr/$(get_libdir)/ruby/${RUBYVERSION}"/rdoc* || die "rm rdoc failed"
    rm -r "${ED}/usr/bin/"{ri,rdoc}"${MY_SUFFIX}" || die "rm rdoc bins failed"

$ ebuild gentoo/usr/portage/dev-lang/ruby/ruby-2.1.10.ebuild digest
&gt;&gt;&gt; Creating Manifest for /home/user/gentoo/usr/portage/dev-lang/ruby</pre>
</div>
</div>
<div class="paragraph">
<p>次はdev-ruby/rcairoで停止してしまいました。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;&gt;&gt; Completed installing rcairo-1.15.2 into /home/user/gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/image/

 * Final size of build directory: 1872 KiB
 * Final size of installed tree: 560 KiB

 * QA Notice: home/user/gentoo///home/user/gentoo/ double prefix
 * QA Notice: home/user/gentoo///home/user/gentoo/usr double prefix
 * QA Notice: home/user/gentoo///home/user/gentoo/usr/include double prefix
 * QA Notice: home/user/gentoo///home/user/gentoo/usr/include/ruby-2.1.0 double prefix
 * QA Notice: home/user/gentoo///home/user/gentoo/usr/include/ruby-2.1.0/rb_cairo.h double prefix
 * ERROR: dev-ruby/rcairo-1.15.2::gentoo failed:
 *   Aborting due to QA concerns: double prefix files installed
 *
 * Call stack:
 *   misc-functions.sh, line 603:  Called install_qa_check
 *   misc-functions.sh, line 217:  Called source 'install_symlink_html_docs'
 *            05prefix, line 114:  Called install_qa_check_prefix
 *            05prefix, line  19:  Called die
 * The specific snippet of code:
 *              die "Aborting due to QA concerns: double prefix files installed"
 *
 * If you need support, post the output of `emerge --info '=dev-ruby/rcairo-1.15.2::gentoo'`,
 * the complete build log and the output of `emerge -pqv '=dev-ruby/rcairo-1.15.2::gentoo'`.
!!! When you file a bug report, please include the following information:
GENTOO_VM=  CLASSPATH="" JAVA_HOME=""
JAVACFLAGS="" COMPILER=""
and of course, the output of emerge --info =rcairo-1.15.2
 * The complete build log is located at '/home/user/gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/temp/build.log'.
 * The ebuild environment file is located at '/home/user/gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/temp/environment'.
 * Working directory: '/home/user/gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/image/home/user/gentoo'
 * S: '/home/user/gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/work'
!!! post install failed; exiting.

&gt;&gt;&gt; Failed to emerge dev-ruby/rcairo-1.15.2, Log file:

&gt;&gt;&gt;  '/home/user/gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/temp/build.log'</pre>
</div>
</div>
<div class="paragraph">
<p>今まで同様コンパイルは問題ないようですが、QA Noticeを見るとパスがおかしなことになっていますね。
QA Noticeの一番下に出ているrb_cairo.hがどこにいるか確認してみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ find . -name rb_cairo.h
./gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/work/all/rcairo-1.15.2/ext/cairo/rb_cairo.h
./gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/work/ruby21/rcairo-1.15.2/ext/cairo/rb_cairo.h
./gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/image/home/user/gentoo/home/user/gentoo/usr/include/ruby-2.1.0/rb_cairo.h</pre>
</div>
</div>
<div class="paragraph">
<p>rc_cairo.h自体は確かに指定された場所に格納されているようです。
より詳細にディレクトリ構成を確認してみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ls -R ./gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/image/home/user/gentoo/home/
./gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/image/home/user/gentoo/home/:
user

./gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/image/home/user/gentoo/home/user:
gentoo

./gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/image/home/user/gentoo/home/user/gentoo:
usr

./gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/image/home/user/gentoo/home/user/gentoo/usr:
include

./gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/image/home/user/gentoo/home/user/gentoo/usr/include:
ruby-2.1.0

./gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/image/home/user/gentoo/home/user/gentoo/usr/include/ruby-2.1.0:
rb_cairo.h</pre>
</div>
</div>
<div class="paragraph">
<p>どうもrc_cairo.hだけが変な場所に格納されているように見えますね。他のファイルはどこにあるのでしょうか。
一階層下がってみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ls ./gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/image/home/user/gentoo/
home  usr</pre>
</div>
</div>
<div class="paragraph">
<p>ここにusrがあるということはどうやら本来はこの下に展開されるのが正しい気がしますね。
ではebuildを確認してみましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ nano gentoo/usr/portage/dev-ruby/rcairo/rcairo-1.15.2.ebuild

each_ruby_install() {
        each_fakegem_install

        insinto $(ruby_get_hdrdir)
        doins ext/cairo/rb_cairo.h
}</pre>
</div>
</div>
<div class="paragraph">
<p>ここでrb_cairo.hを格納しているようです。ちょっとruby_get_hdrdirの中身を確認してみましょうか。</p>
</div>
<div class="paragraph">
<p>ebuildの実態はただのシェルスクリプトなので、以下のようなことも出来ます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>each_ruby_install() {
        each_fakegem_install

        echo log: $(ruby_get_hdrdir)
        insinto $(ruby_get_hdrdir)
        doins ext/cairo/rb_cairo.h
}</pre>
</div>
</div>
<div class="paragraph">
<p>ebuildを編集したら再度実行して失敗させてみます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ebuild gentoo/usr/portage/dev-ruby/rcairo/rcairo-1.15.2.ebuild digest
&gt;&gt;&gt; Creating Manifest for /home/user/gentoo/usr/portage/dev-ruby/rcairo
$ emerge mikutter

 * Running install phase for ruby21 ...
log: /home/user/gentoo/usr/include/ruby-2.1.0</pre>
</div>
</div>
<div class="paragraph">
<p>出ました！どうやらruby_get_hdrdirの中身にEPREFIXが含まれているようですね。
これが他のところのEPREFIXと重複してしまうのが原因でしょう。</p>
</div>
<div class="paragraph">
<p>さて、やっと原因がわかったので、後は対策するだけです。
EPREFIXが重複してしまうことが原因なので、EPREFIXを一方から排除すればよいだけです。
今回まさにパスを指定しているところを突き止めたので、ここからEPREFIXを除去すれば良さそうです。</p>
</div>
<div class="paragraph">
<p>そこで編集した結果がこちら。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>each_ruby_install() {
        each_fakegem_install

        echo log: `echo $(ruby_get_hdrdir) | sed "s|${EPREFIX}||"`
        insinto `echo $(ruby_get_hdrdir) | sed "s|${EPREFIX}||"`
        doins ext/cairo/rb_cairo.h
}</pre>
</div>
</div>
<div class="paragraph">
<p>シェルスクリプトなのでsedとかも使えます。
ここで気を付けなければいけないことは、${EPREFIX}はスラッシュを含んでいるため
sedの区切り文字としてスラッシュを使用する(sed "s/${EPREFIX}//")とうまく行きません。
また変数${EPREFIX}を使っているので''で囲ってもダメです。</p>
</div>
<div class="paragraph">
<p>さて、結果を確認してみましょう。うまく行ったか確認するため、rcairoのみをインストールしてみます。<br>
オプションの-1は一度だけインストールするためのオプションで、依存関係なのでインストールするが
そのソフトそのものが必要なわけではないときなどに使用します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ebuild gentoo/usr/portage/dev-ruby/rcairo/rcairo-1.15.2.ebuild digest
&gt;&gt;&gt; Creating Manifest for /home/user/gentoo/usr/portage/dev-ruby/rcairo
$ emerge -1 dev-ruby/rcairo

&gt;&gt;&gt; Install rcairo-1.15.2 into /home/user/gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/image/ category dev-ruby
 * Running install phase for ruby21 ...
log: /usr/include/ruby-2.1.0
 * Running install phase for all ...
 * Running check install phase for ruby21 ...
&gt;&gt;&gt; Completed installing rcairo-1.15.2 into /home/user/gentoo/var/tmp/portage/dev-ruby/rcairo-1.15.2/image/</pre>
</div>
</div>
<div class="paragraph">
<p>うまく行ったようですね。</p>
</div>
<div class="paragraph">
<p>後は特に問題が起こらず、無事mikutterをインストールすることが出来ました。</p>
</div>
<div class="paragraph">
<p>思ったよりも色々なエラーが出ましたが、エラーメッセージを見て調べていけば
大体の問題は解決できると思います。
今までのエラーは全てコンパイルではなくその後のインストール部分で出ているので、
アプリのソースコードを編集する必要は基本的にないと思っています。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="true--4"><a class="anchor" href="#true--4"></a>あとがき</h2>
<div class="sectionbody">
<div class="paragraph">
<p>現在8月14日午前3時です。前回よりは早く仕上がりました、何とか寝れそうです。
今回直前まで書く内容が決まらず、実際に書き始めたのが前日という突貫作業でした。
何も学んでいない。</p>
</div>
<div class="paragraph">
<p>また今回PDF化に前回と同じasciidocfxを使った所、何故か日本語が表示できないという
問題に見舞われて寝る時間が一時間減ってしまいました。
結局HTMLで出力してブラウザからPDF化を行っているのですが、
そのせいでいまいちレイアウトがよろしくない状態になってしまっています。</p>
</div>
<div class="paragraph">
<p>それでは、みなさんもGentoo Prefixを使ってみてください。</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-08-14 07:49:15
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>